---
title: "Tidying the Data"
author: "Ian Dinwoodie"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
library(tidyverse)
knitr::opts_chunk$set(echo=TRUE)
```

# Loading the Data

Load the raw data and verify its dimensions and structure.

```{r}
df <- read.csv('../data/dogs.csv', header=TRUE, skipNul=TRUE)
dim(df)
str(df)
```

We see that we have 1095 responses across 26 fields. The columns names are not
quite servicable in their current state, so we rename them for ease of use.

```{r}
names <- c(
  'acq_12_wo_or_less',
  'at_least_1yo',
  'age_yrs',
  'sex',
  'neutered',
  'train_6mo_or_less',
  'train_age',
  'train_class_count',
  'train_technique',
  'restr_device',
  'aggression',
  'fear_anxiety',
  'jumping',
  'barking',
  'coprophagia',
  'compulsion',
  'soil_when',
  'soil_how',
  'soil_where',
  'rep_materials',
  'hyperactive',
  'destructive',
  'escape',
  'mounting',
  'take_again',
  'owner_id'
)
colnames(df) <- names
str(df)
```

# Specifying Data Types

## Continious

We don't want to interpret every column as characters (`chr`), let's start by
specifying the continuous variables.

```{r}
df$age_yrs <- as.integer(df$age_yrs)
summary(df$age_yrs)
```

## Discrete

### Factors

We convert a bulk of the columns to factors.

```{r}
factors <- c(
  'acq_12_wo_or_less',
  'at_least_1yo',
  'sex',
  'neutered',
  'train_age',
  'train_class_count',
  'train_technique',
  'restr_device',
  'aggression',
  'fear_anxiety',
  'jumping',
  'barking',
  'coprophagia',
  'compulsion',
  'soil_when',
  'soil_how',
  'soil_where',
  'rep_materials',
  'hyperactive',
  'destructive',
  'escape',
  'mounting',
  'owner_id'
)

for (c in factors) {
  df[, c] <- as.factor(df[, c])
}

str(df[, factors])
```

### Boolean

It's clear that some factor columns can be converted to boolean (i.e., logical).

```{r}
df$at_least_1yo <- ifelse(df$at_least_1yo == 'Yes', TRUE, FALSE)
df$neutered <- ifelse(df$neutered == 'Yes', TRUE, FALSE)

str(df)
```

# Deriving Columns

We derive some columns for ease of use and improved clarity.

```{r}
```



# Saving the Tidy Data

Save the data to a file in RDS format so that the data types are saved and so
that the output is compressed.

```{r}
saveRDS(df, '../data/tidy.Rds')
```
